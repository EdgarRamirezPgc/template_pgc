<!-- Area de Donde esta Ubicado el Usuario -->
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item">
      <a routerLink="/pages/dashboard">Dashboard</a>
    </li>
    <li class="breadcrumb-item">
      <a routerLink="./">Actividades</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Ingreso de Actividad</li>
  </ol>
</nav>

<!-- ==================================================================================== -->
<!-- Componente para los Mensajes en pantalla -->
<toaster-container [toasterconfig]="config"></toaster-container>

<!-- Tarjetas para Agrupar los Datos de Ingreso de la Actvidad/Proyecto -->
<div class="row">
  <div class="col-12 col-sm-12 col-md-12 col-lg-12">
    <nb-card>
      <nb-tabset>
        <!-- Tab #1 de Datos Generales del Proyecto/Programa -->
        <nb-tab tabTitle="Paso #1 | Datos Generales">
          <!-- <nb-card-header>Ingresa los datos generales del Proyecto/Programa</nb-card-header><br> -->
          <nb-card-body>
            <!-- ==================================================================================== -->
            <!-- Definición de los Datos Generales -->
            <nb-flip-card>
              <nb-card-front>
                <nb-card accent="warning" status="primary">
                  <nb-card-header>Datos Generales | Definición del Programa/Proyecto</nb-card-header>
                  <nb-card-body>

                    <!-- ==================================================================================== -->
                    <!-- Nombre del Proyecto/Actividad y Espacios de Trabajo Asignados al Usuario -->
                    <br>

                    <div class="row">
                      <div class="col-12 col-sm-6 col-md-8">
                        <div class="form-group">
                          <label for="inputFirstName">Nombre del Proyecto/Programa</label>
                          <input #nombreActividad="ngModel" type="text" class="form-control" name="nombreActividad" id="nombreActividad"
                            ngControl="nombreActividad" [(ngModel)]="_activityModel.nombreActividad" required autofocus
                            placeholder="Nombre del Proyecto/Programa">
                        </div>
                      </div>
                      <div class="col-6 col-md-4">
                        <div class="form-group">
                          <label>Espacio de Trabajo</label>
                          <select class="form-control" #idEspacioTrabajo="ngModel" name="idEspacioTrabajo" id="idEspacioTrabajo"
                            ngControl="idEspacioTrabajo" [(ngModel)]="_activityModel.idEspacioTrabajo" required>
                            <option value="0">**** Selecciona el Espacio de Trabajo ****</option>
                            <option *ngFor="let item of JsonReceptionEspaciosTrabajo" [value]="item.idEspacioTrabajo">
                              {{item.descripcionEspacioTrabajo}}
                            </option>
                          </select>
                        </div>
                      </div>
                    </div>

                    <!-- ==================================================================================== -->
                    <!-- Definición de los Estados de la Actividad -->
                    <div class="row">
                      <div class="col-sm-3">
                        <div class="form-group">
                          <label>Estado de Proyecto/Programa</label>
                          <select class="form-control" #idEstado="ngModel" name="idEstado" id="idEstado" required
                            ngControl="idEstado" [(ngModel)]="_activityModel.idEstado">
                            <option value="0">**** Selecciona el Estado ****</option>
                            <option *ngFor="let item of JsonReceptionEstados" [value]="item.idEstado">
                              {{item.descEstado}}
                            </option>
                          </select>
                        </div>
                      </div>
                      <div class="col-sm-9">
                        <div class="form-group">
                          <label for="inputWebsite">Explicación de Estado</label>
                          <input #explicacionEstado type="text" class="form-control" id="explicacionEstado" name="explicacionEstado"
                            ngControl="explicacionEstado" [(ngModel)]="_activityModel.explicacionEstado" placeholder="Explicación de Estado">
                        </div>
                      </div>
                    </div>

                    <!-- ==================================================================================== -->
                    <!-- Definicion de los Descripcion y Objetivos de la Actividad -->
                    <div class="row">
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label>Descripción</label>
                          <div class="form-group">
                            <textarea #descripcionActividad class="form-control" id="descripcionActividad" name="descripcionActividad"
                              ngControl="descripcionActividad" [(ngModel)]="_activityModel.descripcionActividad"
                              required placeholder="Descripción del Proyecto/Programa"></textarea>
                          </div>
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label>Objetivo</label>
                          <div class="form-group">
                            <textarea #objetivoActividad class="form-control" id="objetivoActividad" name="objetivoActividad"
                              ngControl="objetivoActividad" [(ngModel)]="_activityModel.objetivoActividad" required
                              placeholder="Objetivo del Proyecto/Programa"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- ==================================================================================== -->
                    <!-- Definicion de Antecentes y Condiciones Previas -->
                    <div class="row">
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label>Antecedentes</label>
                          <div class="form-group">
                            <textarea #antecedentesAtividad class="form-control" id="antecedentesAtividad" name="antecedentesAtividad"
                              ngControl="antecedentesAtividad" [(ngModel)]="_activityModel.antecedentesAtividad"
                              placeholder="Antecedentes del Proyecto/Programa"></textarea>
                          </div>
                        </div>
                      </div>
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label>Condiciones Previas</label>
                          <div class="form-group">
                            <textarea #condicionesActividad class="form-control" id="condicionesActividad" name="condicionesActividad"
                              ngControl="condicionesActividad" [(ngModel)]="_activityModel.condicionesActividad"
                              placeholder="Condiciones Previas del Proyecto/Programa"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- ==================================================================================== -->
                    <!-- Definicion de Justificacion -->
                    <div class="row">
                      <div class="col-sm-6">
                        <div class="form-group">
                          <label>Justificación</label>
                          <div class="form-group">
                            <textarea #justificacionAtividad class="form-control" id="justificacionAtividad" name="justificacionAtividad"
                              ngControl="justificacionAtividad" [(ngModel)]="_activityModel.justificacionAtividad"
                              required placeholder="Justificación del Proyecto/Programa"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>

                  </nb-card-body>
                </nb-card>
              </nb-card-front>

              <nb-card-back>
                <nb-card>
                  <nb-card-body>
                    <div class="jumbotron jumbotron-fluid">
                      <div class="container">
                        <h1 class="display-4">Hola, nesesitas ayuda!</h1>
                        <p class="lead">Este es un ejemplo de como ingresar la información en cada sección presentada.</p>
                        <hr class="my-4">
                        <p>Datos Generales | Definición del Programa/Proyecto. <br> Se requiere ingresar la información
                          que
                          define al proyecto como tal, su nombre, justificacion, objetivos, a que cooperante pertenece
                          (Agencia
                          de Cooperación/Espacio de Trabajo). <br><br> Ademas nesesita que le definamos el estado o
                          etapa
                          en el que se encuentra, asi como una breve Explicación del porque se encuentra en esa etapa
                          que
                          definamos. <br><br> Los Campos: Descripción, Objetivo, Antecedentes y Condiciones Previas,
                          son
                          tipo texto, lo que requiere que describamos textualmente lo que el documento del
                          proyecto/programa
                          menciona en el mismo, vale la pena mencionar que estas decripciones son abiertas sin limites
                          de
                          cantidad de palabras para ingresar y que se puede copiar y pargar de untexto a otro. <br><br>
                          En
                          la Seccion de resultados, se realizara una sentesis de lo que se espera alcanzar con la
                          implementacion
                          y desarrollo del proyecto en mención y ademas actaulizar con el transcurrir del tiempo los
                          resultados
                          que seran alcanzados.
                          y desarrollo del proyecto en mención y ademas actaulizar con el transcurrir del tiempo los
                          resultados
                          que seran alcanzados. <br><br>
                        </p>
                        <br><br>
                        <a class="btn btn-primary btn-lg" href="#" role="button">Intructivo de uso ...</a>
                      </div>
                    </div>
                  </nb-card-body>
                </nb-card>
              </nb-card-back>
            </nb-flip-card>

            <!-- ==================================================================================== -->
            <!-- Definición de los Resultados de la Actividad -->
            <nb-card accent="warning" status="primary">
              <nb-card-header>Datos Generales | Resultados</nb-card-header>
              <nb-card-body>
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label>Resultados Esperados</label>
                      <div class="form-group">
                        <textarea #resultadosEsperados class="form-control" id="resultadosEsperados" name="resultadosEsperados"
                          ngControl="resultadosEsperados" [(ngModel)]="_activityModel.resultadosEsperados" placeholder="Resultados Esperados del Proyecto/Programa"></textarea>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label>Resultados a la Fecha</label>
                      <div class="form-group">
                        <textarea #resultadosAlaFecha class="form-control" id="resultadosAlaFecha" name="resultadosAlaFecha"
                          ngControl="resultadosAlaFecha" [(ngModel)]="_activityModel.resultadosAlaFecha" placeholder="Resultados a la Fecha del Proyecto/Programa"></textarea>
                      </div>
                    </div>
                  </div>
                </div>
              </nb-card-body>
            </nb-card>

            <!-- ==================================================================================== -->
            <!-- Definición de los Datos de Planificacion del Proyecto -->
            <nb-card status="primary" accent="warning">
              <nb-card-header>Datos Generales | Planificación</nb-card-header>
              <nb-card-body>
                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label>Estrategia</label>
                      <select #idEstrategia class="form-control" id="idEstrategia" name="idEstrategia" ngControl="idEstrategia"
                        [(ngModel)]="_activityModel.idEstrategia">
                        <option value="0">**** Selecciona la Estrategia ****</option>
                        <option *ngFor="let item of JsonReceptionEstrategias" [value]="item.idEstrategia">
                          {{item.descripcionEstrategia}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="inputWebsite">Código BIP / SIAFI</label>
                      <input #codigoSiafiBip type="text" class="form-control" id="codigoSiafiBip" name="codigoSiafiBip"
                        ngControl="codigoSiafiBip" [(ngModel)]="_activityModel.codigoSiafiBip" placeholder="Código BIP / SIAFI">
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label>Presupuesto</label>
                      <select #idPresupuesto class="form-control" id="idPresupuesto" name="idPresupuesto" ngControl="idPresupuesto"
                        [(ngModel)]="_activityModel.idPresupuesto">
                        <option value="0">**** Selecciona el Presupuesto ****</option>
                        <option *ngFor="let item of JsonReceptionPresupuesto" [value]="item.idPresupuesto">
                          {{item.descPresupuesto}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label>Sector Ejecutor</label>
                      <select #idSectorEjecutor class="form-control" id="idSectorEjecutor" name="idSectorEjecutor"
                        ngControl="idSectorEjecutor" [(ngModel)]="_activityModel.idSectorEjecutor">
                        <option value="0">**** Selecciona el Sector Ejecutor ****</option>
                        <option *ngFor="let item of JsonReceptionSectorEjecutor" [value]="item.idSectorEjecutor">
                          {{item.descSectorEjecutor}}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
              </nb-card-body>
            </nb-card>

            <!-- ==================================================================================== -->
            <!-- Definición de las ID's Internas del Proyecto -->
            <nb-card status="primary" accent="warning">
              <nb-card-header>Datos Generales | ID's Internas
                <button type="button" class="btn btn-primary btn-group-icon btn-group-divider" [nbPopover]="card"
                  nbPopoverMode="hint">
                  <i class="ion-help"></i>
                </button>
              </nb-card-header>
              <nb-card-body>
                <div class="row">
                  <div class="col-sm-3">
                    <div class="form-group">
                      <label>Tipo de Organización</label>
                      <select #idTipoOrganizacion class="form-control" id="idTipoOrganizacion" name="idTipoOrganizacion"
                        ngControl="idTipoOrganizacion" [(ngModel)]="_activityModel.idTipoOrganizacion">
                        <option value="0">**** Selecciona el tipo de Organizacion ****</option>
                        <option *ngFor="let item of JsonReceptionTiposOrganizacion" [value]="item.idTipoOrganizacion">
                          {{item.nombreTipoOrganizacion}}
                        </option>
                      </select>
                    </div>
                  </div>

                  <div class="col-sm-3">
                    <div class="form-group">
                      <label>País de la Organización</label>
                      <select #idPais class="form-control" id="idPais" name="idPais" ngControl="idPais" [(ngModel)]="_activityModel.idPais"
                        (change)="organizacionesIdTipoIdPaisListService(_activityModel.idTipoOrganizacion, _activityModel.idPais )">
                        <option value="0">**** Selecciona el País de la Organizacion ****</option>
                        <option *ngFor="let item of JsonReceptionPaises" [value]="item.idPais">
                          {{item.descPais}}
                        </option>
                      </select>
                    </div>
                  </div>

                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="inputWebsite">Buscar Organización</label>
                      <div class="input-group full-width">
                        <div class="input-group-addon"><img src="../../../../assets/icons/common/magnifying-glass-search.png"></div>
                        <!-- <input type="text" class="form-control" id="inputWebsite" placeholder="Buscar Organización, por el filtro aplicado"> -->
                        <ng2-completer [inputClass]="'form-control'" [(ngModel)]="searchStrFunc" [datasource]="dataService"
                          placeholder="Buscar Organización, por el filtro aplicado" style=" width: 90%; "
                          [minSearchLength]="0" (selected)="onSelectedFunc($event)" openOnClick="true" selectOnClick="true"
                          textSearching="Buscando Organización ..." textNoResults="No se han encontrado nada ..."></ng2-completer>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="row">
                  <div class="col-sm-6">
                    <div class="form-group">
                      <label for="inputWebsite">Id Interna</label>
                      <div class="input-group full-width">
                        <input #idInterna="ngModel" type="text" class="form-control" name="idInterna" id="idInterna"
                          ngControl="idInterna" [(ngModel)]="_activityModel.idInterna" placeholder="ID Interna">
                        <!-- style="text-transform: uppercase;" -->

                        <!-- Botonera de Organizaciones -->
                        <button type="button" class="btn btn-primary btn-group-icon btn-group-divider" nbPopover="Agrega la ID Interna a la lista"
                          nbPopoverMode="hint" (click)="pushJsonIdInterna()">
                          <i class="ion-checkmark-round"></i>
                        </button>
                      </div>
                    </div>
                  </div>

                  <!-- Tarjeta de ayuda de la Seccion -->
                  <ng-template #card>
                    <nb-card class="popover-card">
                      <nb-card-header status="warning">
                        Hola!
                      </nb-card-header>
                      <nb-card-body>
                        Esta sección de la PGC, sirve para registrar el Código que usted tiene en su Sistema de
                        Registro de Proyectos. Y de esta forma hacer una equivalencia entre su Sistema y la PGC.
                      </nb-card-body>
                    </nb-card>
                  </ng-template>
                </div>

                <div class="row">
                  <div class="col-sm-12">
                    <!-- Tabla de las ID's Internas -->
                    <!-- <div class="form-group">
                      <label>ID's Internas seleccionadas</label>
                      <ng2-smart-table [settings]="settings" [source]="source" (deleteConfirm)="onDeleteConfirm($event)"
                        (createConfirm)="onCreateConfirm($event)">
                      </ng2-smart-table>
                    </div> -->
                    <hr>
                    <table class="table table-hover" id="tableIdInterna">
                      <thead>
                        <tr>
                          <th scope="col" style="width: 5%;">#</th>
                          <th scope="col" style="width: 20%;">Tipo de Organización</th>
                          <th scope="col" style="width: 20%;">País de Organización</th>
                          <th scope="col" style="width: 30%;">Organización</th>
                          <th scope="col" style="width: 20%;">ID Interna</th>
                          <th scope="col" style="width: 5%;">Acción</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let itemIdInterna of JsonIdInternaOrganizacion; let homeTableIndex = index">
                          <td>{{ homeTableIndex + 1 }}</td>
                          <td>{{ itemIdInterna.descTipoOrganizacion }}</td>
                          <td>{{ itemIdInterna.descPaisOrganizacion }}</td>
                          <td>{{ itemIdInterna.descOrganizacion }}</td>
                          <td>
                            <!-- <div class="input-group input-group-sm" id="tdIdInterna">
                              <input type="text" placeholder="ID Interna" class="form-control" value="" />
                            </div> -->
                            <!-- {{ itemIdInterna.idInterna | uppercase }} -->
                            {{ itemIdInterna.idInterna }}
                          </td>
                          <td>
                            <img src="../../../../assets/icons/forms/rubbish-bin_24x.png" alt="" (click)="deleteRowHomeForm(homeTableIndex, itemIdInterna.descTipoOrganizacion, itemIdInterna.descPaisOrganizacion )">
                          </td>
                        </tr>
                      </tbody>
                    </table>

                  </div>
                </div>
                <!-- <button class="btn btn-primary" (click)="makeToast()">Guardar como borrador</button> -->
                <div class="btn-group">
                  <button type="button" class="btn btn-primary btn-group-icon btn-group-divider">
                    <i class="ion-folder"></i>
                  </button>
                  <button type="button" class="btn btn-primary" (click)="makeToast(); pushJsonIdInterna()">Guardar
                    como borrador</button>
                  <button type="button" class="btn btn-success" (click)="verJson()">Ver Json</button>
                </div>
              </nb-card-body>
            </nb-card>

          </nb-card-body>
        </nb-tab>
        <!-- Fin de Datos Generales -->
        <!-- ==================================================================================== -->

        <!-- Tab #2 de Sectores y Programas del Proyecto/Programa -->
        <nb-tab tabTitle="Paso #2 | Sectores y Programas">
          <span id="sectorPrograms">Content #2</span>
        </nb-tab>
        <!-- Fin de Datos Generales -->
        <!-- ==================================================================================== -->

        <nb-tab tabTitle="Paso #3 | Información Financiera">
          <span>Content #3</span>
        </nb-tab>
        <nb-tab tabTitle="Paso #4 | Datos de Ubicación">
          <span>Content #4</span>
        </nb-tab>
        <nb-tab tabTitle="Paso #5 | Documentos de Soporte">
          <span>Content #5</span>
        </nb-tab>
      </nb-tabset>
    </nb-card>
  </div>
</div>
